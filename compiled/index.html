<html>
  <head>
    <meta charset="UTF-8">
    <link rel='stylesheet' type='text/css' href='codemirror-5.8.0.css'>
    <!-- -TODO: move most of this to editor.css but wrap it all in a .webppl class -->
    <style>
     body {
         font-family: Menlo
     }

     pre {
         border: 1px solid black;
         border-radius: 2px;
         margin: 0;
         padding: 4px;
     }

     pre > code {
         color: #bfbfbf;
     }

     .CodeMirror-lines {
         border: 1px solid black;
         border-radius: 2px;
     }

     button.run {
         border: 1px solid gray;
         font-family: Menlo;
         background-color: #e0e0e0;
         margin: 0.5em 0 0.5em 0;
         padding: 0.5em 1em;
         min-width: 100px;
     }

     button.run:hover {
         cursor: pointer
     }

     button.run:active {
         background-color: #a0a0a0;
     }

     button.run:disabled {
         cursor: auto;
     }

     #wrapper {
         width: 50%;
         min-width: 600px;
         margin: 0 auto;
     }

     div.CodeMirror span.CodeMirror-matchingbracket {
         background-color: #e0e0e0;
     }

     div.CodeMirror span.CodeMirror-nonmatchingbracket {
         color: black;
         background-color: #ECAAB9;
     }

     canvas.paper {
         border: 1px solid gray;
     }

     .hidden {
         display: none;
     }


    </style>
    <link rel='stylesheet' type='text/css' href='editor.css'>
  </head>
  <body>
    <div id="wrapper">
      <h2>foo</h2>
      <pre id="foo"><code>print('start 1');
hist(repeat(1e5, flip))
print('end 1')</code></pre>
    </div>

  </body>
  <script src="webppl.js"></script>
  <script src="editor.js"></script>
  <script src="jquery.js"></script>
  <script src="paper.js"></script>
  <script src="draw.js"></script>
  <script>
    var storedCode = localStorage.getItem('code');
    if (storedCode) {
    $("pre > code").html(storedCode)
    }

    // TODO: doesn't seem to work over https
    // initializeWorker('http://dippl.org/assets/js/webppl.min.js'); // works with absolute path too
    $("pre").map(function(i,el) { wpCodeEditor(el, {language: 'webppl'}); })
  </script
</html>
